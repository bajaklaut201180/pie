<?php defined('BASEPATH') OR exit('No Direct Script Access Allowed');

class Login extends CI_Controller
{
    public function index()
    {
        $asset = array(
                    'title'     =>'Login Sukses',
                    'js'        =>array(),
                    'css'       =>array()
                );
        
        $this->load->model('model_login');
        $this->form_validation->set_rules('username', 'user', 'required');
        $this->form_validation->set_rules('password', 'pass', 'required');
        
        if($this->form_validation->run()==false){
            $this->load->view('admin/template/header', $asset);
            $this->load->view('admin/login_view');
            $this->load->view('admin/template/footer');
        }else{
            $post = $this->input->post();
            $response = $this->model_login->validate($post);
            $this->session->set_userdata($response);
            pre($this->session->userdata());
        }
        
    }
    
    public function logout()
    {
        $this->session->sess_destroy();
        redirect(base_url('admin/login'));
    } 

}